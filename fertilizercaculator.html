<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¾ è¾²å¥½äº‹ï½ç°¡æ˜“è‚¥æ–™æ··æ‹Œè¨ˆç®—æ©Ÿ</title>
    <style>
        body { font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2c3e50; }
        label { display: block; margin-top: 10px; font-weight: bold; color: #34495e; }
        select, input, button { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #bdc3c7; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
        button { background-color: #27ae60; color: white; border: none; font-weight: bold; cursor: pointer; margin-top: 15px; }
        button:hover { background-color: #219150; }
        button.delete-btn { background-color: #e74c3c; width: auto; padding: 5px 10px; margin: 0; font-size: 14px; }
        
        .result-box { margin-top: 25px; padding: 15px; background-color: #e8f6f3; border-radius: 8px; border-left: 5px solid #1abc9c; }
        .result-item { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 18px; }
        .result-item span { font-weight: bold; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: center; }
        th { background-color: #f8f9fa; color: #7f8c8d; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸŒ¾ è¾²å¥½äº‹ï½ç°¡æ˜“è‚¥æ–™æ··æ‹Œè¨ˆç®—æ©Ÿ</h2>
    
    <label for="fertSelect">1. é¸æ“‡è‚¥æ–™ç¨®é¡</label>
    <select id="fertSelect"></select>

    <label for="weightInput">2. è¼¸å…¥é‡é‡ (å…¬æ–¤)</label>
    <input type="number" id="weightInput" placeholder="ä¾‹å¦‚ï¼š25" min="0">

    <button onclick="addFertilizer()">â• åŠ å…¥æ¸…å–®</button>

    <table>
        <thead>
            <tr>
                <th>è‚¥æ–™åç¨±</th>
                <th>é‡é‡(kg)</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody id="listBody">
            </tbody>
    </table>

    <div class="result-box" id="resultBox" style="display:none;">
        <h3 style="margin-top:0;">ğŸ“Š è¨ˆç®—çµæœ</h3>
        <div class="result-item">ç¸½é‡é‡ï¼š <span id="totalW">0</span> kg</div>
        <hr>
        <div class="result-item" style="color:#e67e22;">æ°® (N)ï¼š <span id="resN">0</span> %</div>
        <div class="result-item" style="color:#2980b9;">ç£· (P)ï¼š <span id="resP">0</span> %</div>
        <div class="result-item" style="color:#8e44ad;">é‰€ (K)ï¼š <span id="resK">0</span> %</div>
    </div>
    
    <button onclick="resetAll()" style="background-color: #95a5a6; margin-top: 20px;">ğŸ”„ å…¨éƒ¨æ¸…é™¤é‡ç®—</button>
</div>

<script>
    // --- é€™è£¡å°±æ˜¯æ‚¨çš„è³‡æ–™åº« (ç›´æ¥å…§åµŒ) ---
    const fertilizers = [
        {name: 'ï§é…¸éŠ¨', n: 21, p: 0, k: 0},
        {name: 'éç£·é…¸éˆ£ï¼ˆç²‰ï¼‰', n: 0, p: 18, k: 0},
        {name: 'ç£·é…¸ä¸€é‰€', n: 0, p: 52, k: 34},
        {name: 'æ°¯åŒ–é‰€(ç´…å’–å“©ï¼‰', n: 0, p: 0, k: 60},
        {name: 'ï§é…¸é‰€', n: 0, p: 0, k: 50},
        {name: 'ï¦½ç´ ', n: 46, p: 0, k: 0},
        {name: 'ç¡é…¸éˆ£', n: 15, p: 0, k: 0},
        {name: 'ç¡é…¸é‰€', n: 15, p: 0, k: 45},
        {name: '1è™Ÿè¤‡è‚¥', n: 20, p: 5, k: 10},
        {name: '4è™Ÿè¤‡è‚¥', n: 11, p: 5.5, k: 22},
        {name: '5è™Ÿè¤‡è‚¥', n: 16, p: 8, k: 12},
        {name: '39è™Ÿè¤‡è‚¥', n: 12, p: 18, k: 12},
        {name: '43è™Ÿè¤‡è‚¥', n: 15, p: 15, k: 15},
        {name: 'è¤‡è‚¥20-20-20', n: 20, p: 20, k: 20},
        {name: 'å³æº¶è¤‡è‚¥1è™Ÿ', n: 26, p: 13, k: 13},
        {name: 'å³æº¶è¤‡è‚¥4è™Ÿ', n: 14, p: 28, k: 14},
        {name: 'å³æº¶è¤‡è‚¥5è™Ÿ', n: 10, p: 20, k: 20},
        {name: 'å³æº¶è¤‡è‚¥6è™Ÿ', n: 5, p: 18, k: 18},
        {name: 'å³æº¶è¤‡è‚¥43è™Ÿ', n: 15, p: 15, k: 15}
    ];

    const select = document.getElementById('fertSelect');
    const listBody = document.getElementById('listBody');
    let currentList = [];

    // åˆå§‹åŒ–ä¸‹æ‹‰é¸å–®
    fertilizers.forEach((f, index) => {
        let option = document.createElement('option');
        option.value = index;
        option.text = f.name + ` (N:${f.n}-P:${f.p}-K:${f.k})`;
        select.add(option);
    });

    function addFertilizer() {
        const index = select.value;
        const weight = parseFloat(document.getElementById('weightInput').value);
        
        if (!weight || weight <= 0) {
            alert("è«‹è¼¸å…¥æ­£ç¢ºçš„é‡é‡ï¼");
            return;
        }

        const fert = fertilizers[index];
        currentList.push({ ...fert, w: weight });
        
        renderTable();
        calculate();
        document.getElementById('weightInput').value = ''; // æ¸…ç©ºè¼¸å…¥æ¡†
    }

    function removeFertilizer(index) {
        currentList.splice(index, 1);
        renderTable();
        calculate();
    }

    function renderTable() {
        listBody.innerHTML = "";
        currentList.forEach((item, idx) => {
            let row = `<tr>
                <td>${item.name}</td>
                <td>${item.w}</td>
                <td><button class="delete-btn" onclick="removeFertilizer(${idx})">åˆªé™¤</button></td>
            </tr>`;
            listBody.innerHTML += row;
        });
    }

    function calculate() {
        if (currentList.length === 0) {
            document.getElementById('resultBox').style.display = 'none';
            return;
        }

        let totalW = 0, totalN = 0, totalP = 0, totalK = 0;

        currentList.forEach(item => {
            totalW += item.w;
            totalN += item.w * (item.n / 100);
            totalP += item.w * (item.p / 100);
            totalK += item.w * (item.k / 100);
        });

        document.getElementById('totalW').innerText = totalW.toFixed(1);
        document.getElementById('resN').innerText = ((totalN / totalW) * 100).toFixed(1);
        document.getElementById('resP').innerText = ((totalP / totalW) * 100).toFixed(1);
        document.getElementById('resK').innerText = ((totalK / totalW) * 100).toFixed(1);
        
        document.getElementById('resultBox').style.display = 'block';
    }

    function resetAll() {
        currentList = [];
        renderTable();
        calculate();
    }
</script>

</body>
</html>
